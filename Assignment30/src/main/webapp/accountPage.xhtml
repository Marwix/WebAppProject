<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      >

    <link rel="stylesheet" href="assets/css/accountPageStyle.css" />

    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <ui:decorate template="assets/template/topbar.xhtml">
        <ui:define name="content">
            <h:body>
                <f:metadata>
                    <f:viewAction action="#{accountPageController.init()}" />
                </f:metadata>
                <div class="container-fluid d-flex h-100 flex-column">
                    <div class="account-row row col-12">
                        <div class="account-panel">
                            <!-- Account Information Area -->
                            <div class="col-12 account-alignment-cardstyle"> 
                                <div class="account-information">
                                    <div>
                                        <h1>Account Information</h1>
                                    </div>
                                    <h:form>
                                        <div class="ui-fluid p-formgrid p-grid">
                                            <div class="p-field p-col-12 p-md-3">
                                                <p:outputLabel for="email" value="Email" />
                                                <p:inputText id="email" value="#{accountBackingBean.email}"/>
                                            </div>
                                            <br/>
                                            <div class="p-field  p-col-12 p-md-3">
                                                <p:outputLabel for="firstname" value="Firstname" />
                                                <p:inputText id="firstname" value="#{accountBackingBean.firstname}"/>
                                            </div>
                                            <div class="p-field  p-col-12 p-md-3">
                                                <p:outputLabel for="lastname" value="Lastname" />
                                                <p:inputText id="lastname" value="#{accountBackingBean.lastname}"/>
                                            </div>
                                            <div class="p-field  p-col-12 p-md-3">
                                                <p:outputLabel for="phonenumber" value="Phonenumber" />
                                                <p:inputText id="phonenumber" value="#{accountBackingBean.phonenumber}"/>
                                            </div>
                                            <div class="p-field  p-col-12 p-md-3">
                                                <p:outputLabel for="address" value="Address" />
                                                <p:inputText id="address" value="#{accountBackingBean.address}"/>
                                            </div>
                                            <div class="p-field  p-col-12 p-md-3">
                                                <p:outputLabel for="city" value="City" />
                                                <p:inputText id="city" value="#{accountBackingBean.city}" />
                                            </div>
                                            <div class="p-field p-col-12 p-md-3">
                                                <p:outputLabel for="zip" value="Zip" />
                                                <p:inputText id="zip" value="#{accountBackingBean.zip}" />
                                            </div>
                                            <br/>
                                            
                                            <p:commandButton type="submit" value="Save" styleClass="rounded-button" action="#{accountPageController.updateUserInformation()}" />
                                        </div>
                                    </h:form>
                                </div>
                            </div>

                            <!-- Change Password Area -->
                            <div class="col-12 password-alignment-cardstyle"> 
                                <div class="password-information-area">
                                    <div>
                                        <h2>Change Password</h2>
                                    </div>
                                    <h:form>
                                        <div class="ui-fluid p-formgrid p-grid">
                                            <div class="p-field  p-col-12 p-md-3">
                                                <p:outputLabel for="pwd" styleClass="p-col-fixed" value="Old Password"/>
                                                <div class="p-col">
                                                    <p:password id="pwd" required="true" value="#{accountBackingBean.oldpassword}"/>
                                                </div>
                                            </div>
                                            <div class="p-field  p-col-12 p-md-3">
                                                <p:outputLabel for="pwd1" styleClass="p-col-fixed" value="New Password"/>
                                                <div class="p-col">
                                                    <p:password id="pwd1" match="pwd2" label="Password 1" required="true" value="#{accountBackingBean.password}"/>
                                                </div>
                                            </div>
                                            <div class="p-field  p-col-12 p-md-3">
                                                <p:outputLabel for="pwd2" styleClass="p-col-fixed" value="Repeat Password"/>
                                                <div class="p-col">
                                                    <p:password id="pwd2" value="#{accountBackingBean.password}" label="Password 2" required="true"/>
                                                </div>
                                            </div>
                                            <br/>
                                            <p:commandButton type="submit" value="Change Password" styleClass="rounded-button" action="#{accountPageController.changePassword()}" update="@form"/>
                                        </div>
                                    </h:form>
                                </div>

                            </div>
                            
                            <!-- Orderlist Area -->
                            <div class="orderlist-area col-12">
                                <div class="order-history-text">
                                    <h2>Order history</h2>
                                </div>
                                <div class="orderlist col-12">
                                    <ul class="list">
                                        <li>
                                                <div class="header">
                                                    <div class="order-column-date">Date</div>
                                                    <div class="order-column-order-number">Ordernumber</div>
                                                    <div class="order-column-status">Status</div>
                                                    <div class="order-column-total">Ordervalue</div>
                                                </div>
                                            </li>
                                        <ui:repeat value="#{accountBackingBean.purchases}" var="purchase">
                                            <li>
                                                <div class="header">
                                                    <div class="order-column-date">#{purchase.time}</div>
                                                    <div class="order-column-order-number">#{purchase.order_id}</div>
                                                    <div class="order-column-status">Sent</div>
                                                    <div class="order-column-total">#{purchase.products.price * purchase.count}</div>
                                                </div>
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                </div>
                            </div>

                        </div>
                    </div>  
                </div>
            </h:body>
            <script src="assets/JS/PurchaseClickScript.js"></script>
            <script src="assets/JS/AccountPageScript.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" 
                    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" 
                    crossorigin="anonymous">
            </script>
        </ui:define>
    </ui:decorate>
</html>